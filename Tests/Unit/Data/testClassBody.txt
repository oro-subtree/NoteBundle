namespace Test;

class Entity
{
    /**
     * @param object $target any object that can have notes
     */
    public function setTarget($target)
    {
        // Note can have only one related entity
        $className = \Doctrine\Common\Util\ClassUtils::getClass($target);
        if (!in_array($className, ['Test\TargetEntity'])) {
            throw new \Exception(sprintf("There's no relation for %s entity class.", $className));
        }
        if ($className == 'Test\TargetEntity') { $this->__reset(); $this->testField = $target; }
    }

    private function __reset()
    {
        $this->testField = null;
    }
}
